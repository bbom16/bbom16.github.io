---
layout: post
title: "알고리즘 문제풀이 - boj_3176 도로네트워크"
tags: [알고리즘, 백준]
comments: true
---

# 백준 3176 < 도로 네트워크 >

### 1. 문제 

N개의 도시와 그 도시를 연결하는 N-1개의 도로로 이루어진 도로 네트워크가 있다. 

모든 도시의 쌍에는 그 도시를 연결하는 유일한 경로가 있고, 각 도로의 길이는 입력으로 주어진다.

총 K개의 도시 쌍이 주어진다. 이때, 두 도시를 연결하는 경로 상에서 가장 짧은 도로의 길이와 가장 긴 도로의 길이를 구하는 프로그램을 작성하시오.

### 2. 문제 해결 

- LCA 알고리즘을 이용해서 문제를 해결 

  - LCA 알고리즘 참고 : <https://www.crocus.co.kr/660>

  - 이 알고리즘에서 이해가 잘 되지 않았던 점

    1. 높이를 맞춰줄 때 왜 2^max_length(max_length =node가 갖고 있는 조상의 개수 -> 0)번째 조상으로 올라간 후 그 다음 조상으로 바꿔준 후에도 같은 for문에서 갱신된 같은 i번째 그 조상만큼 올라가는지가 이해 안됨.

       - 이미 확인한 조상을 다시 체크하지않기 위해서 그 밑에 조상을 확인한다고 이해 

       - 이 때 조상이 2^i번째 조상이 없을 경우 예외처리 필요

    2. 높이 맞춰준 후 LCA를 찾는 경우 2^i로 올라간 후 밑으로 내려오는데 이 경우에 최소 조상이 아닌 그 위 조상을 구할거라고 생각

       - 서로 부모가 달라지는 경우까지 내려와서 구함(같으면 n1, n2는 바뀌지않음)

       - 그 후 그 둘의 부모가 LCA

         ```c++
         //parents[n][i] -> n의 2^i번째 조상
         for(int i=max_depth; i>=0; i--){
         		if (i >= parents[n1].size() || i >= parents[n2].size()) continue;
         		if (parents[n1][i] != parents[n2][i]) {
         			n1 = parents[n1][i];
         			n2 = parents[n2][i];
         		}
         	}
         ```

         

- LCA를 구하기위해 각 노드로부터 2^i번째 조상을 저장하는 전처리 과정이 필요

  - 전처리 과정을 거치지않고 문제를 해결할 경우 시간초과 발생
  - 깊이가 깊을수록 전처리 과정 필요

- LCA 알고리즘을 사용하기 위해 도로 정보를 dfs 를 이용해 트리 생성

  - 처음 입력받을 때 이차원 vector를 이용해 각 2 3 100 이라면 

    ```c++
    //예)
    vector<vector<pair<int,int> > a;
    a[2].push_back(3,100);
    a[3].push_back(2,100);
    ```

    으로 저장

  - 그 후 dfs를 돌면서 부모 정보를 저장 

    - 이 때 2^i번째 부모를 같이 저장
      - 재귀를 이용해서 저장
      - 내 부모의 2^n번째, 그 다음 부모의2^(n+1)번째 부모 이런식으로 값을 저장해서 2^i번째 부모 정보를 저장함

- 최대/최소 길이의 도로를 구하는 문제이기 때문에 도로마다 확인이 필요하고, 지나가는 도로를 확인하기 위해 LCA 알고리즘을 이용해 LCA(최소 공통 조상)를 구함

- 최대/최소 길이의 도로를 구하는 것도 LCA를 구할 때 함께 수행

  - 이를 위해 전처리 과정 시 node에서 2^i번째 조상까지 가는 도로의 최대/최소값을 저장

### 3. 느낀점

LCA 알고리즘 문제를 처음 풀어보는거라 어려웠고, 위에 적었듯이 이해가 잘 되지않는 부분들이 있어 구현이 어려웠다. 

처음에 높이를 맞춰주거나 LCA를 찾을 때 높이를 하나씩 찾아서 시간초과가 떴고, 그 후에 높이 맞출 때 부모가 i개만큼 없을 때 예외처리안해서 런타임에러가 떴었다ㅜㅜ 

그래도 끝까지 풀어서 AC 맞아서 뿌듯 :-)

문제 : <https://www.acmicpc.net/problem/3176>

전체코드:  [github.com/bbom16](https://github.com/bbom16/study_algorithm/blob/master/algorithm_2019_cplus/algorithm_2019_cplus/3176.cpp)

